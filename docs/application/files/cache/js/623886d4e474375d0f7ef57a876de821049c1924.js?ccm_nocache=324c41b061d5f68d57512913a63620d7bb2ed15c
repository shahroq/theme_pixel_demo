/*!
/**
 * Monkey patch jQuery 1.3.1+ to add support for setting or animating CSS
 * scale and rotation independently.
 * https://github.com/zachstronaut/jquery-animate-css-rotate-scale
 * Released under dual MIT/GPL license just like jQuery.
 * 2009-2012 Zachary Johnson www.zachstronaut.com
 */!function(t){function e(t){var e=t.data("_ARS_data");return e||(e={rotateUnits:"deg",scale:1,rotate:0},t.data("_ARS_data",e)),e}function a(t,e){var a="";"undefined"!=typeof t.data("axis")&&(a=t.data("axis")),t.css("transform","rotate"+a+"("+e.rotate+e.rotateUnits+") scale("+e.scale+","+e.scale+")")}t.fn.rotate=function(r){var n,o=t(this),s=e(o);return"undefined"==typeof r?s.rotate+s.rotateUnits:(n=r.toString().match(/^(-?\d+(\.\d+)?)(.+)?$/),n&&(n[3]&&(s.rotateUnits=n[3]),s.rotate=n[1],a(o,s)),this)},t.fn.scale=function(r){var n=t(this),o=e(n);return"undefined"==typeof r?o.scale:(o.scale=r,a(n,o),this)};var r=t.fx.prototype.cur;t.fx.prototype.cur=function(){return"rotate"==this.prop?parseFloat(t(this.elem).rotate()):"scale"==this.prop?parseFloat(t(this.elem).scale()):r.apply(this,arguments)},t.fx.step.rotate=function(a){var r=e(t(a.elem));t(a.elem).rotate(a.now+r.rotateUnits)},t.fx.step.scale=function(e){t(e.elem).scale(e.now)};var n=t.fn.animate;t.fn.animate=function(a){if("undefined"!=typeof a.rotate){var r,o,s=a.rotate.toString().match(/^(([+-]=)?(-?\d+(\.\d+)?))(.+)?$/);s&&s[5]&&(r=t(this),o=e(r),o.rotateUnits=s[5]),a.rotate=s[1]}return n.apply(this,arguments)}}(jQuery);!function(t,i,e){"use strict";var a,s=i.event,o=i.event.handle?"handle":"dispatch";s.special.smartresize={setup:function(){i(this).bind("resize",s.special.smartresize.handler)},teardown:function(){i(this).unbind("resize",s.special.smartresize.handler)},handler:function(t,i){var e=this,n=arguments;t.type="smartresize",a&&clearTimeout(a),a=setTimeout(function(){s[o].apply(e,n)},"execAsap"===i?0:100)}},i.fn.smartresize=function(t){return t?this.bind("smartresize",t):this.trigger("smartresize",["execAsap"])},i.Gri=function(t,e){this.element=i(e),this._create(t),this._init()},i.Gri.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}},i.Gri.prototype={_filterFindBricks:function(t){var i=this.options.itemSelector;return i?t.filter(i).add(t.find(i)):t},_getBricks:function(t){var i=this._filterFindBricks(t).css({position:"absolute"}).addClass("grid-brick");return i},_create:function(e){this.options=i.extend(!0,{},i.Gri.settings,e),this.styleQueue=[];var a=this.element[0].style;this.originalStyle={height:a.height||""};var s=this.options.containerStyle;for(var o in s)this.originalStyle[o]=a[o]||"";this.element.css(s),this.horizontalDirection=this.options.isRTL?"right":"left";var n=this.element.css("padding-"+this.horizontalDirection),r=this.element.css("padding-top");this.offset={x:n?parseInt(n,10):0,y:r?parseInt(r,10):0},this.isFluid=this.options.columnWidth&&"function"==typeof this.options.columnWidth;var l=this;setTimeout(function(){l.element.addClass("grid--gallery")},0),this.options.isResizable&&i(t).bind("smartresize.grid--gallery",function(){l.resize()}),this.reloadItems()},_init:function(t){this._getColumns(),this._reLayout(t)},option:function(t,e){i.isPlainObject(t)&&(this.options=i.extend(!0,this.options,t))},layout:function(t,i){for(var e=0,a=t.length;a>e;e++)this._placeBrick(t[e]);var s={};if(s.height=Math.max.apply(Math,this.colYs),this.options.isFitWidth){var o=0;for(e=this.cols;--e&&0===this.colYs[e];)o++;s.width=(this.cols-o)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:s});var n,r=this.isLaidOut&&this.options.isAnimated?"animate":"css",l=this.options.animationOptions;for(e=0,a=this.styleQueue.length;a>e;e++)n=this.styleQueue[e],n.$el[r](n.style,l);this.styleQueue=[],i&&i.call(t),this.isLaidOut=!0},_getColumns:function(){var t=this.options.isFitWidth?this.element.parent():this.element,i=t.width();this.columnWidth=this.isFluid?this.options.columnWidth(i):this.options.columnWidth||this.$bricks.outerWidth(!0)||i,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((i+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1)},_placeBrick:function(t){var e,a,s,o,n,r=i(t);if(e=Math.ceil(r.outerWidth(!0)/this.columnWidth),e=Math.min(e,this.cols),1===e)s=this.colYs;else for(a=this.cols+1-e,s=[],n=0;a>n;n++)o=this.colYs.slice(n,n+e),s[n]=Math.max.apply(Math,o);for(var l=Math.min.apply(Math,s),d=0,h=0,c=s.length;c>h;h++)if(s[h]===l){d=h;break}var u={top:l+this.offset.y};u[this.horizontalDirection]=this.columnWidth*d+this.offset.x,this.styleQueue.push({$el:r,style:u});var f=l+r.outerHeight(!0),g=this.cols+1-c;for(h=0;g>h;h++)this.colYs[d+h]=f},resize:function(){var t=this.cols;this._getColumns(),(this.isFluid||this.cols!==t)&&this._reLayout()},_reLayout:function(t){var i=this.cols;for(this.colYs=[];i--;)this.colYs.push(0);this.layout(this.$bricks,t)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(t){this.reloadItems(),this._init(t)},appended:function(t,i,e){var a=this.element.width();if(this.options.columnWidth(a),i){this._filterFindBricks(t).css({top:this.element.height()});var s=this;setTimeout(function(){s._appended(t,e)},1)}else this._appended(t,e)},_appended:function(t,i){var e=this._getBricks(t);this.$bricks=this.$bricks.add(e),this.layout(e,i)},remove:function(t){this.$bricks=this.$bricks.not(t),t.remove()},destroy:function(){this.$bricks.removeClass("grid-brick").each(function(){this.style.position="",this.style.top="",this.style.left=""});var e=this.element[0].style;for(var a in this.originalStyle)e[a]=this.originalStyle[a];this.element.unbind(".grid--gallery").removeClass("grid--gallery").removeData("grid--gallery"),i(t).unbind(".grid--gallery")}},i.fn.imagesLoaded=function(t){function e(){t.call(s,o)}function a(t){var s=t.target;s.src!==r&&-1===i.inArray(s,l)&&(l.push(s),--n<=0&&(setTimeout(e),o.unbind(".imagesLoaded",a)))}var s=this,o=s.children().children("img").add(s.filter("img")),n=o.length,r="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",l=[];return n||e(),o.bind("load.imagesLoaded error.imagesLoaded",a).each(function(){var t=this.src;this.src=r,this.src=t}),s};var n=function(i){t.console&&t.console.error(i)};i.fn.grid=function(a){var s=function(t){var s=i.extend({},i.fn.grid.defaults,a);a==e&&(a={}),a.isFitWidth=s.isFitWidth,a.isAnimated=s.isAnimated,a.itemSelector=".box",a.gutterWidth=s.horizontalSpaceBetweenThumbnails;var o=i(t).addClass("centered").addClass("grid-clearfix"),n=s.columnWidth;"auto"==n?a.columnWidth=function(t){for(var i=-999,e=s.columns;e>=1;e--)i<s.columnMinWidth&&(i=(t-(e-1)*a.gutterWidth)/e|0);return o.find("div.box").width(i),i}:"function"!=typeof n&&(a.columnWidth=function(t){var i=n;return o.find("div.box").width(i),i}),o.find("div.box").css("margin-bottom",s.verticalSpaceBetweenThumbnails)},o=function(s){function o(t,i){this.category=t,this.index=i}var n=i.extend({},i.fn.grid.defaults,a),r=i(s),l=r.find(".box"),d=Array();l.each(function(t){s=i(this);var a=s.data("category");a==e&&(a="all");var n=new o(a,t);d.push(n)});var h=Array();for(var c in d){var u=d[c];if("all"!=u.category){for(var f=!1,g=0;g<h.length;g++)h[g]==u.category&&(f=!0);0==f&&h.push(u.category)}}i(".grid-extracategories").each(function(){h.push(i(this).data("category"))}),r.find(".box[data-others]").each(function(){for(var t=i(this).data("others"),a=t.split("-"),s=0;s<a.length;s++){var o=a[s];""!=o&&o!=e&&-1==h.indexOf(o)&&h.push(o)}});for(var p=i('<ul class="category-navbar" />').hide().insertBefore(r),v=i("<li />").data("category","all").appendTo(p).addClass("select"),v=i("<a />").html(n.allText).appendTo(v),g=0;g<h.length;g++)var v=i("<li />").data("category",h[g]).appendTo(p),v=i("<a />").html(h[g]).appendTo(v);p.on("click","a",function(t){t.preventDefault();var i=jQuery(this);if(!i.parent("li").hasClass("select")){i.parent("li").addClass("select").siblings("li").removeClass("select");var e=r,a=i.parent("li").data("category");"all"==a?e.children('div[data-show="yes"]').show().addClass("box grid-brick").css({top:200,left:200}):(e.children('div[data-others*="-'+a+'-"][data-show="yes"]').show().addClass("box grid-brick").css({top:200,left:200}),e.children('div[data-category="'+a+'"][data-show="yes"]').show().addClass("box grid-brick").css({top:200,left:200}),e.children("div").not('.box[data-others*="-'+a+'-"]').not('.box[data-category="'+a+'"]').removeClass("box grid-brick").hide()),r.grid("reload"),w(k(C()))}}),"object"!=typeof h||0==h.length||0==n.showFilterBar||(n.noAll&&p.children("li").eq(0).hide(),p.slideDown(400));var m=i("<div />").insertAfter(r),y=!1,b=function(){m.addClass("grid-loader").removeClass("grid-loadMore").html("")},x=function(){m.removeClass("grid-loader")},w=function(t){t?m.addClass("grid-loadMore").html(n.loadMoreImagesText):m.removeClass("grid-loadMore").html("")},k=function(t){var i=0;for(var e in d)if("all"==t)i++;else{var a=d[e];a.category==t&&i++}return i>0?(y=!1,!0):!1},C=function(){var t=p.find("li[class=select]").data("category");return t},T=function(){var t=C();"all"!=t&&r.children("div").not('.box[data-others*="-'+t+'-"]').not('.box[data-category="'+t+'"]').removeClass("box grid-brick").hide()},A=!0,B=function(t){var a=C();b();var o=0,h=i.extend({},d);for(var c in h){var u=h[c];if("all"==a);else if(a!=u.category)continue;if(o++,o>t)break;s=l.eq(u.index),s.addClass("box grid-brick").attr("data-show","yes").hide().css({top:200,left:200});var f=s.find("div[data-thumbnail]").data("thumbnail"),g=s.find("div[data-image]").data("image"),alt=s.find('div[data-thumbnail]').data('alt');f==e&&(f=g),g==e&&(g=f),alt==e&&(alt='');var v=i('<img src="'+f+'" data-lightbox="'+g+'" alt="'+alt+'" />');s.prepend(v),delete d[c]}r.imagesLoaded(function(){A&&n.noAll?("all"==n.defaultCategory?p.children("li").eq(1).css("marginLeft","7px").addClass("select").siblings("li").removeClass("select"):p.children("li").each(function(){var t=i(this);t.data("category")==n.defaultCategory&&t.css("marginLeft","7px").addClass("select").siblings("li").removeClass("select")}),A=!1):A&&"all"!=n.defaultCategory&&(p.children("li").each(function(){var t=i(this);t.data("category")==n.defaultCategory&&t.addClass("select").siblings("li").removeClass("select")}),A=!1),l.filter(":hidden").css({top:200,left:200}).show(),T(),y=!1,x(),w(k(C())),r.grid("reload")})};l.removeClass("box grid-brick").hide(),l.attr("data-show","no"),B(n.imagesToLoadStart);var W=function(){m.hasClass("grid-loadMore")&&B(n.imagesToLoad)};m.on("click",function(){W()}),n.lazyLoad&&i(t).scroll(function(){m.closest("html").length&&i(t).scrollTop()==i(document).height()-i(t)[0].innerHeight&&0==y&&(y=!0,W())}),r.on("mouseenter.hoverdir, mouseleave.hoverdir","div.box",function(t){if(n.caption){var a=i(this),s=t.type,o=a.find("div.thumbnail-caption"),r=_(a,{x:t.pageX,y:t.pageY}),l=S(r,a),d=o.children("div.aligment");if(d[0]==e){var h=o.html();o.html("<div class='aligment'><div class='aligment'>"+h+"</div></div>")}if("mouseenter"===s){if("classic"==n.captionType)return o.css({left:0,top:0}),void o.fadeIn(300);o.css({left:l.from,top:l.to}),o.stop().show().fadeTo(0,1,function(){i(this).stop().animate({top:0,left:0},200,"linear")})}else{if("classic"==n.captionType)return o.css({left:0,top:0}),void o.fadeOut(300);"grid-fade"==n.captionType?o.fadeOut(700):o.stop().animate({left:l.from,top:l.to},200,"linear",function(){o.hide()})}}});var _=function(t,i){var e=t.width(),a=t.height(),s=(i.x-t.offset().left-e/2)*(e>a?a/e:1),o=(i.y-t.offset().top-a/2)*(a>e?e/a:1),n=Math.round((Math.atan2(o,s)*(180/Math.PI)+180)/90+3)%4;return n},S=function(t,i){var e,a;switch(t){case 0:n.reverse?(e=0,a=-i.height()):(e=0,a=-i.height());break;case 1:n.reverse?(e=-i.width(),a=0):(e=i.width(),a=0);break;case 2:n.reverse?(e=0,a=-i.height()):(e=0,a=i.height());break;case 3:n.reverse?(e=i.width(),a=0):(e=-i.width(),a=0)}return{from:e,to:a}},z=i("body"),F={interval:"none"},M=0,L=i('<div class="autoGrid-lightbox" />').appendTo(z),I=i('<div class="autoGrid-nav" />').appendTo(L),P=i('<div class="autoGrid-close" />').appendTo(I),O=(i('<i class="iconClose" />').appendTo(P),i('<div class="autoGrid-play" />'));n.lightboxPlayBtn&&O.appendTo(I);var G=(i('<i class="iconPlay" />').appendTo(O),i('<div class="autoGrid-lbcaption" />').appendTo(I).html("Here will go the text for the lightbox")),Q=i('<div class="autoGrid-next" />').appendTo(I),$=(i('<i class="iconNext" />').appendTo(Q),i('<div class="autoGrid-prev" />').appendTo(I)),q=(i('<i class="iconPrev" />').appendTo($),i('<div class="lightbox-timer" />').appendTo(L)),Y=P.width(),D=3;n.lightboxPlayBtn&&(D=4);var H=function(){var t=L.outerWidth();650>t?(G.hide(),Q.css("width",t/D),$.css("width",t/D),O.css("width",t/D),P.css("width",t-t/D*(D-1))):(G.show(),Q.css("width",Y),$.css("width",Y),O.css("width",Y),P.css("width",Y));var i=L.find("img"),e=L.outerHeight()-I.outerHeight()-10;i.css("max-height",e)};jQuery(t).resize(function(){H()});var j=new Image,R=function(){j.onload=null,j=null,L.find("img").remove()},N=function(){L.find(".lb-loader").remove()},Z=function(){L.append('<div class="lb-loader"/>')};L.attr("unselectable","on").css("user-select","none").on("selectstart",!1);var K=function(){q.stop(!0,!0).width(0)},U=function(){clearInterval(F.interval)},X=function(){0!=n.lightBoxShowTimer&&q.css({position:"absolute",bottom:0}).animate({width:"100%"},n.lightBoxPlayInterval,"linear",function(){K()})},E=!1,J=!1,V=function(){F.interval=setTimeout(function(){ot()},n.lightBoxPlayInterval),X()},tt=function(){E&&0==J&&(K(),U(),V())},it=i("<span />"),et=function(t,a){R(),N(),Z();var s=0,o=0;1!=a&&(s=.9,o=n.lightBoxSpeedFx),0==n.lightBoxZoomAnim&&(s=1);var r=t,l=r.data("lightbox");l==e&&(l=r.attr("src"));var d=r.siblings("div.lightbox-text").html();0==n.lightBoxText&&(d="");var h="<div><div>"+d+"</div></div>";G.html(h),j=new Image;var c=i(j),u=j;j.onload=function(){u==j&&(N(),L.append(c.hide().scale(s)),c.fadeIn(o).animate({scale:"1"},{duration:n.lightBoxSpeedFx,complete:function(){tt()}}),H())},j.src=l,it.stop(!0),it=i(j)},at=!1;r.on("click","div.box",function(){at=!0;var a=i(this),s=a.data("url");if(s!=e){var o=a.data("target");return void("_blank"==o?t.open(s,"_blank"):location.href=s)}if(0!=n.lightBox){J=!1,M=r.find(".box").index(this);var l=a.children("img");I.animate({"margin-top":0},n.lightBoxSpeedFx),L.fadeIn(n.lightBoxSpeedFx),et(l,!0)}}),L.on("click","div",function(t){t.stopPropagation()}),L.on("click","img",function(t){t.stopPropagation()}),L.on("click",function(){st()}),P.on("click",function(){st()});var st=function(){n.lightBoxStopPlayOnClose&&(O.removeClass("selected"),E=!1),at=!1,J=!0,K(),U(),L.find(".lb-loader").remove();var t=0;0==n.lightBoxZoomAnim&&(t=1);var i=L.find("img").stop().show();I.animate({"margin-top":-I.outerHeight()},n.lightBoxSpeedFx),i[0]!=e?i.animate({scale:t},n.lightBoxSpeedFx,function(){L.fadeOut(100)}):L.fadeOut(100)},ot=function(){J=!1;var t=r.find(".box");if(M+=1,M>=t.length&&(M=0),!t.eq(M).is(":visible"))for(var i=M,e=0;e<t.length;e++)if(i++,i>=t.length&&(i=0),t.eq(i).is(":visible")){M=i;break}var a=t.eq(M).children("img");et(a)},nt=function(){J=!1;var t=r.find(".box");if(M-=1,0>M&&(M=t.length-1),!t.eq(M).is(":visible"))for(var i=M,e=0;e<t.length;e++)if(i--,0>i&&(i=t.length-1),t.eq(i).is(":visible")){M=i;break}var a=t.eq(M).children("img");et(a)};Q.on("click",function(){K(),U(),ot()}),L.on("click","img",function(){K(),U(),ot()}),$.on("click",function(){K(),U(),nt()}),i(document).keyup(function(t){if(n.lightboxKeyboardNav){if("37"==t.keyCode){if(0==at)return;K(),U(),nt()}if("39"==t.keyCode){if(0==at)return;K(),U(),ot()}27==t.keyCode&&st()}}),n.lightBoxAutoPlay&&(O.addClass("selected"),E=!0),O.on("click",function(){s=i(this),s.hasClass("selected")?(s.removeClass("selected"),E=!1,K(),U()):(s.addClass("selected"),E=!0,V())})};if("string"==typeof a){var r=Array.prototype.slice.call(arguments,1);this.each(function(){var t=i.data(this,"grid");return t?i.isFunction(t[a])&&"_"!==a.charAt(0)?void t[a].apply(t,r):void n("no such method '"+a+"' for grid instance"):void n("cannot call methods on grid prior to initialization; attempted to call method '"+a+"'")})}else this.each(function(){var t=i.data(this,"grid");t?(t.option(a||{}),t._init()):(s(this),i.data(this,"grid",new i.Gri(a,this)),o(this))});return this},i.fn.grid.defaults={showFilterBar:!0,imagesToLoad:5,imagesToLoadStart:15,lazyLoad:!1,isFitWidth:!0,horizontalSpaceBetweenThumbnails:5,verticalSpaceBetweenThumbnails:5,columnWidth:"auto",columns:5,columnMinWidth:220,isAnimated:!0,caption:!0,captionType:"grid",lightBox:!0,lightboxKeyboardNav:!0,lightBoxSpeedFx:500,lightBoxZoomAnim:!0,lightBoxText:!0,lightboxPlayBtn:!0,lightBoxAutoPlay:!1,lightBoxPlayInterval:4e3,lightBoxShowTimer:!0,lightBoxStopPlayOnClose:!1,noAll:!1,defaultCategory:"all",loadMoreImagesText:"Load More",allText:"All"}}(window,jQuery);;

